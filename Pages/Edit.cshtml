@page "{projectName}"
@model EditModel

@Html.AntiForgeryToken()

<div class="notepad-page-container">
    <div class="notepad-content">
        <ul class="notepad-page">
            <li class="project-title">
                <span id="current-project-title">@Model.CurrentProject.ProjectName</span>
            </li> 

            @for(Int32 count = 0; count < Math.Min(@Model.CurrentProject.ProjectTasks.Count(), Model.PageSize); count++)
            {
                <li>
                    <input asp-for="CurrentProject.ProjectTasks.ToList()[count].Completed" 
                            class="notepad-line-item" name="[@count].Completed" />
                    <input asp-for="CurrentProject.ProjectTasks.ToList()[count].TaskName" 
                            class="edit-page-task" value="@Model.CurrentProject.ProjectTasks.ToList()[count].TaskName"
                            name="[@count].TaskName" />
                </li>
            }

            <form asp-page-handler="savenewtask">
                <li>
                    <hidden name="projectname" value="@Model.CurrentProject.ProjectName" />
                    <input class="notepad-line-item faded-text edit-page-task" id="new-project-task" 
                            type="text" placeholder="New task..." name="taskname"/>
                    <button type="submit" id="new-task"
                            class="btn btn-sm notepad-button basic-notepad-button">Add</button>
                </li>
            </form>

            @for(Int32 count = @Model.CurrentProject.ProjectTasks.Count(); count < @Model.PageSize; count++)
            {
                <li>
                    <a class="notepad-line-item"></a>
                </li>
            }
        </ul>

        <a asp-page="index" class="btn notepad-button">Back</a>
        
        @if(Model.NextPageAvailable)
        {
            <a asp-page="Edit" asp-route-projectname="@Model.CurrentProject.ProjectName" 
                asp-route-pagenumber="@(@Model.CurrentPage + 1)" class="btn btn-sm notepad-button">Next Page</a>
        }

        @if (Model.CurrentPage > 0)
        {
            <a asp-page="Edit" asp-route-projectname="@Model.CurrentProject.ProjectName" 
                asp-route-pagenumber="@(@Model.CurrentPage - 1)" class="btn btn-sm notepad-button">Previous Page</a>
        }
    </div>
</div>